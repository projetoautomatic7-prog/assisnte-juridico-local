fa√ßa uma analise pra min conforme a seguir: graph TD
A[API DJEN CNJ] -->|1. Busca publica√ß√µes| B[djen-monitor.ts]
B -->|2. Deduplica Redis| C[use-djen-publications.ts]
C -->|3. Carrega no painel| D[ExpedientePanel.tsx]
D -->|4. Detecta pendentes| E[useEffect - linha 645]
E -->|5. Dispara ap√≥s 2s| F[runAutoAnalysis]
F -->|6. Para cada expediente| G[analyzeExpediente]
G -->|7. Chama IA| H[Mrs. Justin-e Gemini 2.5 Pro]
H -->|8. Retorna an√°lise| I[Parse JSON + Valida√ß√µes]
I -->|9. Cria tarefas| J[getAgentTasksFromAnalysis]
J -->|10. Distribui para| K[6 Agentes Especializados]
K --> L[‚úÖ Publica√ß√£o Analisada + Tarefas Criadas]const analyzeExpediente = async (exp: Expediente) => {
// 1. Chama API Gemini via /api/llm-proxy
// 2. Prompt especializado em intima√ß√µes BR
// 3. Retorna JSON estruturado:
{
summary: "Resumo da intima√ß√£o",
documentType: "Tipo do documento",
priority: "alta" | "m√©dia" | "baixa",
deadline: { days, type, endDate },
suggestedActions: ["a√ß√µes recomendadas"],
nextSteps: ["pr√≥ximos passos"]
}

// 4. Cria tarefas para outros agentes:
const agentTasks = getAgentTasksFromAnalysis(analyzedExp, analysisData);
// - gestao-prazos (se tem prazo)
// - monitor-djen (registra processamento)
// - analise-risco (se prioridade alta)
// - redacao-peticoes (se precisa resposta)
// - pesquisa-juris (se precisa pesquisa)// Linha 645-659: An√°lise autom√°tica ao carregar
useEffect(() => {
if (autoAnalysisRanRef.current) return; // Executa apenas 1x por sess√£o
if (safeExpedientes.length === 0) return;
if (loading) return;

const pending = safeExpedientes.filter(needsAnalysis);
if (pending.length > 0) {
autoAnalysisRanRef.current = true;
setTimeout(() => {
runAutoAnalysis(); // üî• Inicia an√°lise ap√≥s 2s
}, 2000);
}import { getEventBadgeStyle, getStatusBadgeStyle, themeConfig } from '@/lib/themes'
// ‚ö†Ô∏è Funciona mas n√£o recomendado (classes Tailwind hardcoded)
<Badge className={getEventBadgeClass('intimacao')}>
<Badge className={getStatusBadgeClass('ativo')}>
// Badges de eventos
<Badge style={getEventBadgeStyle('intimacao')}>Intima√ß√£o</Badge>

// Badges de status
<Badge style={getStatusBadgeStyle('ativo')}>Ativo</Badge>

// Cores diretas para √≠cones/textos

<div style={{ color: themeConfig.colors.urgente }}> {stats.urgentDeadlines} </div> }, [safeExpedientes, loading, runAutoAnalysis]); // - estrategia-processual (sempre) }