# Agente GitLab - Desenvolvimento
# ConfiguraÃ§Ã£o para ambiente de desenvolvimento

name: assistente-juridico-dev
url: https://gitlab.com/
token: $AGENTE_DESENVOLVIMENTO_TOKEN
executor: docker
environment: desenvolvimento

stages:
  - build
  - test
  - deploy-dev

variables:
  DOCKER_DRIVER: overlay2
  DOCKER_TLS_CERTDIR: "/certs"

# Jobs especÃ­ficos para desenvolvimento
build:dev:
  stage: build
  script:
    - echo "ğŸ—ï¸ Build para desenvolvimento"
    - npm ci
    - npm run build:dev
  only:
    - merge_requests
    - develop

test:dev:
  stage: test
  script:
    - echo "ğŸ§ª Testes para desenvolvimento"
    - npm run test
    - npm run lint
  coverage: '/Lines\s*:\s*(\d+\.\d+)%/'
  only:
    - merge_requests
    - develop

deploy:dev:
  stage: deploy-dev
  script:
    - echo "ğŸš€ Deploy para desenvolvimento"
    - echo "Deploying to dev environment"
  environment:
    name: development
    url: https://dev.assistente-juridico.com
  only:
    - develop