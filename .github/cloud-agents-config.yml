# ConfiguraÃ§Ã£o Central para Agentes em Nuvem
# GitHub Actions + Vercel + Cron Jobs
# Data: 2025-12-07

version: "1.0"
cloud_agents_permissions: "unrestricted"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 1ï¸âƒ£  GITHUB ACTIONS - PermissÃµes Globais
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

github_actions:
  enabled: true
  permissions:
    contents: write          # âœ… Pode fazer commit/push
    pull-requests: write     # âœ… Pode criar/atualizar PRs
    issues: write            # âœ… Pode atualizar issues
    deployments: write       # âœ… Pode fazer deploy
    packages: write          # âœ… Pode publicar packages
    checks: write            # âœ… Pode atualizar checks
    statuses: write          # âœ… Pode atualizar status

  # Workflows com permissÃµes automÃ¡ticas
  workflows:
    - copilot-auto-fix.yml
    - auto-test-fix.yml
    - auto-assign-copilot.yml
    - agents-integration.yml
    - deploy.yml

  # Secrets automaticamente disponÃ­veis
  auto_secrets: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 2ï¸âƒ£  VERCEL SERVERLESS - PermissÃµes de Deploy
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

vercel:
  enabled: true
  permissions:
    deploy: write           # âœ… Deploy automÃ¡tico
    env_variables: read     # âœ… Ler variÃ¡veis de ambiente
    logs: write             # âœ… Escrever logs
    analytics: read         # âœ… Ler analytics

  # Auto-deploy configurado
  auto_deploy:
    enabled: true
    branches:
      - main
      - develop
    trigger: push

  # Functions com permissÃµes de produÃ§Ã£o
  functions:
    - api/agents.ts         # 45s timeout, 1GB memory
    - api/cron.ts           # 60s timeout, 512MB memory
    - api/djen-sync.ts      # 60s timeout, 512MB memory
    - api/llm-proxy.ts      # 40s timeout, 512MB memory
    - api/legal-services.ts # 30s timeout, 512MB memory
    - api/kv.ts             # 30s timeout, 256MB memory

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 3ï¸âƒ£  CRON JOBS - ExecuÃ§Ã£o AutomÃ¡tica 24/7
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

cron_jobs:
  enabled: true
  timezone: America/Sao_Paulo
  jobs:
    - id: djen-monitor
      schedule: "0 12,20 * * *"   # 09h e 17h BRT
      endpoint: /api/cron?job=djen_monitor
      timeout: 300
      max_duration: 60

    - id: process-agent-queue
      schedule: "*/15 * * * *"    # A cada 15min
      endpoint: /api/cron?job=process_queue
      timeout: 60
      max_duration: 45

    - id: notifications
      schedule: "*/5 * * * *"     # A cada 5min
      endpoint: /api/cron?job=notifications
      timeout: 30
      max_duration: 30

    - id: calendar-sync
      schedule: "0 */2 * * *"     # A cada 2h
      endpoint: /api/cron?job=calendar_sync
      timeout: 120
      max_duration: 60

    - id: datajud-monitor
      schedule: "0 16 * * *"      # 13h BRT
      endpoint: /api/cron?job=datajud_monitor
      timeout: 300
      max_duration: 60

    - id: deadline-alerts
      schedule: "0 55 11 * * *"   # 08:55 BRT
      endpoint: /api/cron?job=deadline_alerts
      timeout: 60
      max_duration: 30

    - id: watchdog
      schedule: "*/30 * * * *"    # A cada 30min
      endpoint: /api/cron?job=watchdog
      timeout: 60
      max_duration: 30

    - id: backup
      schedule: "0 3 * * *"       # 00h BRT
      endpoint: /api/cron?job=backup
      timeout: 600
      max_duration: 300

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 4ï¸âƒ£  ENVIRONMENT VARIABLES - DisponÃ­veis em Todos os Agentes
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

environment:
  shared:
    # Agentes funcionam sem restriÃ§Ã£o
    COPILOT_UNRESTRICTED_OPERATIONS: "true"
    SKIP_PREFLIGHT_CHECK: "true"
    SKIP_GIT_COMMIT_VERIFICATION: "true"
    
    # Auto-operaÃ§Ãµes
    AUTO_COMMIT: "true"
    AUTO_PUSH: "true"
    AUTO_DEPLOY: "true"

  github_actions:
    GIT_AUTHOR_NAME: "GitHub Copilot Bot"
    GIT_AUTHOR_EMAIL: "noreply@github.com"
    GIT_COMMITTER_NAME: "GitHub Copilot Bot"
    GIT_COMMITTER_EMAIL: "noreply@github.com"

  vercel:
    NODE_ENV: "production"
    LOG_LEVEL: "info"
    ENABLE_ANALYTICS: "true"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 5ï¸âƒ£  SECRETS - Sincronizados em Todos os Agentes
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

secrets_sync:
  enabled: true
  # GitHub Secrets automaticamente sincronizados para Vercel
  auto_sync_to:
    - vercel
    - actions

  required_secrets:
    - UPSTASH_REDIS_REST_URL
    - UPSTASH_REDIS_REST_TOKEN
    - GEMINI_API_KEY
    - VITE_GOOGLE_CLIENT_ID
    - VITE_GOOGLE_API_KEY
    - SENTRY_DSN
    - RESEND_API_KEY

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 6ï¸âƒ£  LOGGING & MONITORING - Rastreamento de Agentes
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

logging:
  enabled: true
  
  github_actions:
    logs_retention: 90         # dias
    upload_to_sentry: true

  vercel:
    logs_retention: 30         # dias
    real_time_monitoring: true
    alerts_on_error: true

  cron_jobs:
    logs_retention: 30         # dias
    status_notifications: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 7ï¸âƒ£  DEPLOYMENT STRATEGY
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

deployment:
  strategy: "continuous"      # Deploy contÃ­nuo no push
  
  production:
    auto_deploy: true
    blue_green: false
    rollback_on_error: true
    
  staging:
    auto_deploy: false
    manual_trigger: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 8ï¸âƒ£  COMPLIANCE & AUDIT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

audit:
  enabled: true
  log_all_operations: true
  retention_period: 90         # dias
  export_to_sentry: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# RESUMO DE PERMISSÃ•ES:
# âœ… GitHub Actions: Escrita total (commits, PRs, issues, deployments)
# âœ… Vercel: Deploy automÃ¡tico, variÃ¡veis de ambiente, logs
# âœ… Cron Jobs: ExecuÃ§Ã£o 24/7 sem interrupÃ§Ã£o
# âœ… Secrets: Sincronizados automaticamente
# âœ… Logs: Centralizados com Sentry
# âœ… Sem necessidade de aprovaÃ§Ã£o/confirmaÃ§Ã£o manual

# STATUS: ğŸŸ¢ AGENTES EM NUVEM OPERACIONAIS COM PERMISSÃ•ES LIVRES
